{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nfunction getBroadcastDims(inShape, outShape) {\n  var inRank = inShape.length;\n  var dims = [];\n\n  for (var i = 0; i < inRank; i++) {\n    var dim = inRank - 1 - i;\n    var a = inShape[dim] || 1;\n    var b = outShape[outShape.length - 1 - i] || 1;\n\n    if (b > 1 && a === 1) {\n      dims.unshift(dim);\n    }\n  }\n\n  return dims;\n}\n\nexports.getBroadcastDims = getBroadcastDims;\n\nfunction getReductionAxes(inShape, outShape) {\n  var result = [];\n\n  for (var i = 0; i < outShape.length; i++) {\n    var inDim = inShape[inShape.length - i - 1];\n    var outAxis = outShape.length - i - 1;\n    var outDim = outShape[outAxis];\n\n    if (inDim == null || inDim === 1 && outDim > 1) {\n      result.unshift(outAxis);\n    }\n  }\n\n  return result;\n}\n\nexports.getReductionAxes = getReductionAxes;\n\nfunction broadcastDimsAreOuter(dims) {\n  for (var i = 0; i < dims.length; i++) {\n    if (dims[i] !== i) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexports.broadcastDimsAreOuter = broadcastDimsAreOuter;\n\nfunction assertAndGetBroadcastShape(shapeA, shapeB) {\n  var result = [];\n  var errMsg = \"Operands could not be broadcast together with shapes \" + (shapeA + \" and \" + shapeB + \".\");\n  var l = Math.max(shapeA.length, shapeB.length);\n\n  for (var i = 0; i < l; i++) {\n    var a = shapeA[shapeA.length - i - 1] || 1;\n    var b = shapeB[shapeB.length - i - 1] || 1;\n\n    if (a > 1 && b > 1 && a !== b) {\n      throw Error(errMsg);\n    }\n\n    result.unshift(Math.max(a, b));\n  }\n\n  return result;\n}\n\nexports.assertAndGetBroadcastShape = assertAndGetBroadcastShape;","map":null,"metadata":{},"sourceType":"script"}