{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar util = require(\"./util\");\n\nvar Profiler = function () {\n  function Profiler(backendTimer, logger) {\n    this.backendTimer = backendTimer;\n    this.logger = logger;\n\n    if (logger == null) {\n      this.logger = new Logger();\n    }\n  }\n\n  Profiler.prototype.profileKernel = function (name, f) {\n    var _this = this;\n\n    var result;\n\n    var holdResultWrapperFn = function holdResultWrapperFn() {\n      result = f();\n    };\n\n    var timer = this.backendTimer.time(holdResultWrapperFn);\n    var vals = result.dataSync();\n    util.checkForNaN(vals, result.dtype, name);\n    timer.then(function (timing) {\n      _this.logger.logKernelProfile(name, result, vals, timing.kernelMs);\n    });\n    return result;\n  };\n\n  return Profiler;\n}();\n\nexports.Profiler = Profiler;\n\nvar Logger = function () {\n  function Logger() {}\n\n  Logger.prototype.logKernelProfile = function (name, result, vals, timeMs) {\n    var time = util.rightPad(timeMs + \"ms\", 9);\n    var paddedName = util.rightPad(name, 25);\n    var rank = result.rank;\n    var size = result.size;\n    var shape = util.rightPad(result.shape.toString(), 14);\n    console.log(\"%c\" + paddedName + \"\\t%c\" + time + \"\\t%c\" + rank + \"D \" + shape + \"\\t%c\" + size, 'font-weight:bold', 'color:red', 'color:blue', 'color: orange');\n  };\n\n  return Logger;\n}();\n\nexports.Logger = Logger;","map":null,"metadata":{},"sourceType":"script"}