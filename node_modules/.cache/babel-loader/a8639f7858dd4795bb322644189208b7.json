{"ast":null,"code":"var _jsxFileName = \"/home/abisek/Python/DL/heroku-apps/mnist_webapp/mnist-webapp/src/components/DrawCanvas.js\";\nimport React from 'react';\nimport { loadModel, predict } from './Main';\nlet model = null;\nexport class Canvas extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.clearCanvas = () => {\n      const ctx = this.refs.canvas.getContext('2d');\n      ctx.clearRect(0, 0, this.refs.canvas.width, this.refs.canvas.height);\n    };\n  }\n\n  componentDidMount() {\n    // const {canvasHeight, canvasWidth} = this.state.canvasDims\n    // this.refs.canvas.height = canvasHeight\n    // this.refs.canvas.width = canvasWidth\n    this.setupCanvas();\n    model = getModel();\n  }\n\n  componentDidUpdate() {\n    // const {canvasHeight, canvasWidth} = this.state.canvasDims\n    // this.refs.canvas.height = canvasHeight\n    // this.refs.canvas.width = canvasWidth\n    this.setupCanvas();\n  }\n\n  setupCanvas() {\n    const canvas = this.refs.canvas;\n    const ctx = canvas.getContext('2d');\n    let penDown = false;\n\n    let startDrawing = () => {\n      penDown = true;\n    };\n\n    let endDrawing = () => {\n      penDown = false;\n      ctx.beginPath();\n      let imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n      predict(model, imageData);\n    };\n\n    let draw = e => {\n      if (!penDown) return;\n      ctx.lineWidth = 15;\n      ctx.lineCap = 'round';\n      ctx.shadowBlur = 2;\n      ctx.shadowOffsetX = 5;\n      ctx.shadowOffsetY = 3;\n      ctx.shadowColor = \"rgba(0, 0, 0, 0.5)\";\n      ctx.lineTo(e.clientX - canvas.offsetLeft, e.clientY - canvas.offsetTop);\n      ctx.stroke();\n    };\n\n    canvas.addEventListener('mousedown', startDrawing);\n    canvas.addEventListener('mouseup', endDrawing);\n    canvas.addEventListener('mousemove', draw);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(\"canvas\", {\n      id: \"drawCanvas\",\n      width: \"500\",\n      height: \"500\",\n      ref: \"canvas\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, \"Sorry your browser does not support canvas\"), React.createElement(\"button\", {\n      id: \"clearButton\",\n      onClick: this.clearCanvas,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"Clear\"));\n  }\n\n}","map":{"version":3,"sources":["/home/abisek/Python/DL/heroku-apps/mnist_webapp/mnist-webapp/src/components/DrawCanvas.js"],"names":["React","loadModel","predict","model","Canvas","Component","clearCanvas","ctx","refs","canvas","getContext","clearRect","width","height","componentDidMount","setupCanvas","getModel","componentDidUpdate","penDown","startDrawing","endDrawing","beginPath","imageData","getImageData","draw","e","lineWidth","lineCap","shadowBlur","shadowOffsetX","shadowOffsetY","shadowColor","lineTo","clientX","offsetLeft","clientY","offsetTop","stroke","addEventListener","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,SAAR,EAAkBC,OAAlB,QAAgC,QAAhC;AAEA,IAAIC,KAAK,GAAG,IAAZ;AAEA,OAAO,MAAMC,MAAN,SAAqBJ,KAAK,CAACK,SAA3B,CAAqC;AAAA;AAAA;;AAAA,SA+D3CC,WA/D2C,GA+D7B,MAAM;AACnB,YAAMC,GAAG,GAAG,KAAKC,IAAL,CAAUC,MAAV,CAAiBC,UAAjB,CAA4B,IAA5B,CAAZ;AACAH,MAAAA,GAAG,CAACI,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoB,KAAKH,IAAL,CAAUC,MAAV,CAAiBG,KAArC,EAA4C,KAAKJ,IAAL,CAAUC,MAAV,CAAiBI,MAA7D;AACA,KAlE0C;AAAA;;AAE3CC,EAAAA,iBAAiB,GAAG;AAEnB;AACA;AACA;AAGA,SAAKC,WAAL;AACAZ,IAAAA,KAAK,GAAGa,QAAQ,EAAhB;AAGA;;AAEDC,EAAAA,kBAAkB,GAAG;AACpB;AACA;AACA;AAEA,SAAKF,WAAL;AACA;;AAEDA,EAAAA,WAAW,GAAG;AACb,UAAMN,MAAM,GAAG,KAAKD,IAAL,CAAUC,MAAzB;AACA,UAAMF,GAAG,GAAGE,MAAM,CAACC,UAAP,CAAkB,IAAlB,CAAZ;AAEA,QAAIQ,OAAO,GAAG,KAAd;;AAEA,QAAIC,YAAY,GAAG,MAAM;AACxBD,MAAAA,OAAO,GAAG,IAAV;AACA,KAFD;;AAIA,QAAIE,UAAU,GAAG,MAAM;AACtBF,MAAAA,OAAO,GAAG,KAAV;AACAX,MAAAA,GAAG,CAACc,SAAJ;AAEA,UAAIC,SAAS,GAAGf,GAAG,CAACgB,YAAJ,CAAiB,CAAjB,EAAmB,CAAnB,EAAqBd,MAAM,CAACG,KAA5B,EAAkCH,MAAM,CAACI,MAAzC,CAAhB;AACAX,MAAAA,OAAO,CAACC,KAAD,EAAOmB,SAAP,CAAP;AAEA,KAPD;;AASA,QAAIE,IAAI,GAAGC,CAAC,IAAI;AACf,UAAI,CAACP,OAAL,EACC;AAEDX,MAAAA,GAAG,CAACmB,SAAJ,GAAgB,EAAhB;AACAnB,MAAAA,GAAG,CAACoB,OAAJ,GAAc,OAAd;AACApB,MAAAA,GAAG,CAACqB,UAAJ,GAAiB,CAAjB;AACArB,MAAAA,GAAG,CAACsB,aAAJ,GAAoB,CAApB;AACAtB,MAAAA,GAAG,CAACuB,aAAJ,GAAoB,CAApB;AACAvB,MAAAA,GAAG,CAACwB,WAAJ,GAAkB,oBAAlB;AACAxB,MAAAA,GAAG,CAACyB,MAAJ,CAAWP,CAAC,CAACQ,OAAF,GAAYxB,MAAM,CAACyB,UAA9B,EAA0CT,CAAC,CAACU,OAAF,GAAY1B,MAAM,CAAC2B,SAA7D;AACA7B,MAAAA,GAAG,CAAC8B,MAAJ;AAEA,KAbD;;AAeA5B,IAAAA,MAAM,CAAC6B,gBAAP,CAAwB,WAAxB,EAAqCnB,YAArC;AACAV,IAAAA,MAAM,CAAC6B,gBAAP,CAAwB,SAAxB,EAAmClB,UAAnC;AACAX,IAAAA,MAAM,CAAC6B,gBAAP,CAAwB,WAAxB,EAAqCd,IAArC;AAEA;;AAODe,EAAAA,MAAM,GAAG;AACR,WAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACP;AAAQ,MAAA,EAAE,EAAC,YAAX;AAAwB,MAAA,KAAK,EAAC,KAA9B;AAAoC,MAAA,MAAM,EAAC,KAA3C;AAAiD,MAAA,GAAG,EAAC,QAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oDADO,EAIP;AAAQ,MAAA,EAAE,EAAC,aAAX;AAAyB,MAAA,OAAO,EAAE,KAAKjC,WAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAJO,CAAR;AAMA;;AA3E0C","sourcesContent":["import React from 'react'\nimport {loadModel,predict} from './Main'\n\nlet model = null\n\nexport class Canvas extends React.Component {\n\n\tcomponentDidMount() {\n\n\t\t// const {canvasHeight, canvasWidth} = this.state.canvasDims\n\t\t// this.refs.canvas.height = canvasHeight\n\t\t// this.refs.canvas.width = canvasWidth\n\n\n\t\tthis.setupCanvas()\n\t\tmodel = getModel()\n\n\n\t}\n\n\tcomponentDidUpdate() {\n\t\t// const {canvasHeight, canvasWidth} = this.state.canvasDims\n\t\t// this.refs.canvas.height = canvasHeight\n\t\t// this.refs.canvas.width = canvasWidth\n\n\t\tthis.setupCanvas()\n\t}\n\n\tsetupCanvas() {\n\t\tconst canvas = this.refs.canvas\n\t\tconst ctx = canvas.getContext('2d')\n\n\t\tlet penDown = false\n\n\t\tlet startDrawing = () => {\n\t\t\tpenDown = true\n\t\t}\n\n\t\tlet endDrawing = () => {\n\t\t\tpenDown = false\n\t\t\tctx.beginPath()\n\n\t\t\tlet imageData = ctx.getImageData(0,0,canvas.width,canvas.height)\n\t\t\tpredict(model,imageData)\n\n\t\t}\n\n\t\tlet draw = e => {\n\t\t\tif (!penDown)\n\t\t\t\treturn\n\n\t\t\tctx.lineWidth = 15\n\t\t\tctx.lineCap = 'round'\n\t\t\tctx.shadowBlur = 2;\n\t\t\tctx.shadowOffsetX = 5;\n\t\t\tctx.shadowOffsetY = 3;\n\t\t\tctx.shadowColor = \"rgba(0, 0, 0, 0.5)\";\n\t\t\tctx.lineTo(e.clientX - canvas.offsetLeft, e.clientY - canvas.offsetTop);\n\t\t\tctx.stroke()\n\n\t\t}\n\n\t\tcanvas.addEventListener('mousedown', startDrawing)\n\t\tcanvas.addEventListener('mouseup', endDrawing)\n\t\tcanvas.addEventListener('mousemove', draw)\n\n\t}\n\n\tclearCanvas = () => {\n\t\tconst ctx = this.refs.canvas.getContext('2d')\n\t\tctx.clearRect(0, 0, this.refs.canvas.width, this.refs.canvas.height)\n\t}\n\n\trender() {\n\t\treturn (<div>\n\t\t\t<canvas id=\"drawCanvas\" width=\"500\" height=\"500\" ref=\"canvas\">\n\t\t\t\tSorry your browser does not support canvas\n\t\t\t</canvas>\n\t\t\t<button id=\"clearButton\" onClick={this.clearCanvas}>Clear</button>\n\t\t</div>)\n\t}\n\n}\n"]},"metadata":{},"sourceType":"module"}