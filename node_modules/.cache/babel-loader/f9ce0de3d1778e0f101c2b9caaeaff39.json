{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) {\n      if (b.hasOwnProperty(p)) d[p] = b[p];\n    }\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar environment_1 = require(\"../environment\");\n\nvar globals_1 = require(\"../globals\");\n\nvar ops_1 = require(\"../ops/ops\");\n\nvar optimizer_1 = require(\"./optimizer\");\n\nvar SGDOptimizer = function (_super) {\n  __extends(SGDOptimizer, _super);\n\n  function SGDOptimizer(learningRate) {\n    var _this = _super.call(this) || this;\n\n    _this.learningRate = learningRate;\n\n    _this.setLearningRate(learningRate);\n\n    return _this;\n  }\n\n  SGDOptimizer.prototype.applyGradients = function (variableGradients) {\n    var _this = this;\n\n    var varNames = Object.keys(variableGradients);\n    varNames.forEach(function (varName) {\n      var gradient = variableGradients[varName];\n      var value = environment_1.ENV.engine.registeredVariables[varName];\n      globals_1.tidy(function () {\n        var newValue = _this.c.mul(gradient).add(value);\n\n        value.assign(newValue);\n      });\n    });\n  };\n\n  SGDOptimizer.prototype.setLearningRate = function (learningRate) {\n    this.learningRate = learningRate;\n\n    if (this.c != null) {\n      this.c.dispose();\n    }\n\n    this.c = globals_1.keep(ops_1.scalar(-learningRate));\n  };\n\n  SGDOptimizer.prototype.dispose = function () {\n    this.c.dispose();\n  };\n\n  return SGDOptimizer;\n}(optimizer_1.Optimizer);\n\nexports.SGDOptimizer = SGDOptimizer;","map":null,"metadata":{},"sourceType":"script"}