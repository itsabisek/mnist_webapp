{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar shader_compiler_1 = require(\"./shader_compiler\");\n\nvar PadProgram = function () {\n  function PadProgram(xShape, paddings, constantValue) {\n    this.variableNames = ['x'];\n    this.outputShape = paddings.map(function (p, i) {\n      return p[0] + xShape[i] + p[1];\n    });\n    var rank = xShape.length;\n    var type = shader_compiler_1.getCoordsDataType(rank);\n    var start = paddings.map(function (p) {\n      return p[0];\n    }).join(',');\n    var end = paddings.map(function (p, i) {\n      return p[0] + xShape[i];\n    }).join(',');\n    var unpackedCoords = ['coords[0]', 'coords[1]', 'coords[2]', 'coords[3]'].slice(0, rank);\n\n    if (rank === 1) {\n      this.userCode = \"\\n        int start = \" + start + \";\\n        int end = \" + end + \";\\n\\n        void main() {\\n          int outC = getOutputCoords();\\n          if (outC < start || outC >= end) {\\n            setOutput(float(\" + constantValue + \"));\\n          } else {\\n            setOutput(getX(outC - start));\\n          }\\n        }\\n      \";\n      return;\n    }\n\n    this.userCode = \"\\n      \" + type + \" start = \" + type + \"(\" + start + \");\\n      \" + type + \" end = \" + type + \"(\" + end + \");\\n\\n      void main() {\\n        \" + type + \" outC = getOutputCoords();\\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\\n          setOutput(float(\" + constantValue + \"));\\n        } else {\\n          \" + type + \" coords = outC - start;\\n          setOutput(getX(\" + unpackedCoords + \"));\\n        }\\n      }\\n    \";\n  }\n\n  return PadProgram;\n}();\n\nexports.PadProgram = PadProgram;","map":null,"metadata":{},"sourceType":"script"}