{"ast":null,"code":"var tf = require('@tensorflow/tfjs'); // let uri = window.location.href + 'modelJS/model.json'\n// export const loadModel = async () => {\n// \ttry{\n// \t\treturn await tf.loadLayersModel(uri)\n// \t}catch(e){\n// \t\tconsole.log(e)\n// \t}\n// \t// console.log(model)\n// }\n\n\nexport const predict = async (model, imageData) => {\n  const pred = await tf.tidy(() => {\n    let data = tf.browser.fromPixels(imageData, 1); // data = data.reshape([1,28,28,1])\n\n    data = tf.expandDims(data);\n    data = tf.cast(data, \"float32\");\n    console.log(data);\n    let predictions = model.predict(imageData);\n    return Array.from(predictions.dataSync());\n  }); // let data = tf.browser.fromPixels(imageData,1)\n  // data = tf.image.resizeNearestNeighbor(data,[28,28])\n  // data = tf.expandDims(data)\n};","map":{"version":3,"sources":["/home/abisek/Python/DL/heroku-apps/mnist_webapp/mnist-webapp/src/components/Main.js"],"names":["tf","require","predict","model","imageData","pred","tidy","data","browser","fromPixels","expandDims","cast","console","log","predictions","Array","from","dataSync"],"mappings":"AAAA,IAAIA,EAAE,GAAGC,OAAO,CAAC,kBAAD,CAAhB,C,CAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,OAAO,MAAMC,OAAO,GAAG,OAAOC,KAAP,EAAaC,SAAb,KAA2B;AAEjD,QAAMC,IAAI,GAAG,MAAML,EAAE,CAACM,IAAH,CAAQ,MAAM;AAChC,QAAIC,IAAI,GAAGP,EAAE,CAACQ,OAAH,CAAWC,UAAX,CAAsBL,SAAtB,EAAgC,CAAhC,CAAX,CADgC,CAEhC;;AACAG,IAAAA,IAAI,GAAGP,EAAE,CAACU,UAAH,CAAcH,IAAd,CAAP;AACAA,IAAAA,IAAI,GAAGP,EAAE,CAACW,IAAH,CAAQJ,IAAR,EAAa,SAAb,CAAP;AACAK,IAAAA,OAAO,CAACC,GAAR,CAAYN,IAAZ;AAEA,QAAIO,WAAW,GAAGX,KAAK,CAACD,OAAN,CAAcE,SAAd,CAAlB;AACA,WAAOW,KAAK,CAACC,IAAN,CAAWF,WAAW,CAACG,QAAZ,EAAX,CAAP;AAEA,GAVkB,CAAnB,CAFiD,CAajD;AACA;AACA;AACA,CAhBM","sourcesContent":["var tf = require('@tensorflow/tfjs')\n\n// let uri = window.location.href + 'modelJS/model.json'\n\n// export const loadModel = async () => {\n// \ttry{\n// \t\treturn await tf.loadLayersModel(uri)\n// \t}catch(e){\n// \t\tconsole.log(e)\n// \t}\n// \t// console.log(model)\n// }\n\n\nexport const predict = async (model,imageData) => {\n\n\tconst pred = await tf.tidy(() => {\n\t\tlet data = tf.browser.fromPixels(imageData,1)\n\t\t// data = data.reshape([1,28,28,1])\n\t\tdata = tf.expandDims(data)\n\t\tdata = tf.cast(data,\"float32\")\n\t\tconsole.log(data);\n\n\t\tlet predictions = model.predict(imageData)\n\t\treturn Array.from(predictions.dataSync())\n\n\t})\n\t// let data = tf.browser.fromPixels(imageData,1)\n\t// data = tf.image.resizeNearestNeighbor(data,[28,28])\n\t// data = tf.expandDims(data)\n}\n"]},"metadata":{},"sourceType":"module"}